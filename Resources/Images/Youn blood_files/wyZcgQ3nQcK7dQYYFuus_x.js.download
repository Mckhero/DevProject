;/*FB_PKG_DELIM*/

__d("MWLightSpeedChatTabSuggestedContactItem.react",["fbt","ActorHovercard.react","CometFacepilePhoto.react","CometMiddot.react","I64","MAWThreadCutover","MDSListCellPressable.react","MDSTextPairing.react","MWXText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||d("react");function a(a){var b=a.setTokens,e=a.token;a=e.rawData;var f=a.displayName,g=a.id,i=a.imageUrl,l=a.isE2EE,m=a.isInstagramAccount;a=a.subtext;var n=d("MAWThreadCutover").useIsCutoverSecureThread((j||(j=d("I64"))).of_string_opt(g)),o=k.jsx(c("CometFacepilePhoto.react"),{size:36,sources:[{alt:f,disabled:!1,source:i}],totalItems:1}),p=null;!n&&l?p=k.jsx(c("MWXText.react"),{numberOfLines:1,type:"meta4",children:h._("__JHASH__PXg4X26-RXS__JHASH__")}):p=m===!0&&a!==""?k.jsxs(c("MWXText.react"),{numberOfLines:1,type:"meta4",children:[a,k.jsx(c("CometMiddot.react"),{}),"Instagram"]}):void 0;return k.jsx("li",{className:"xurb0ha x1sxyh0",children:k.jsx(c("ActorHovercard.react"),{actorID:g,position:"start",children:function(a){return k.jsx(c("MDSListCellPressable.react"),{addOnStart:o,content:k.jsx(c("MDSTextPairing.react"),{headline:f,level:4,meta:p,reduceEmphasis:!0}),disabled:!1,onPress:function(){return b([e])},ref:a,selected:!1,size:"medium",testid:void 0})}})},g)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWLightSpeedChatTabSuggestedContacts.react",["CometScrollableArea.react","MWCMLightSpeedChatTabActionViewItems.react","MWLightSpeedChatTabSuggestedContactItem.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={contactsList:{paddingTop:"x1y1aw1k",$$css:!0}};function a(a){var b=a.setTokens;a=a.tokens;return i.jsxs(c("CometScrollableArea.react"),{horizontal:!0,testid:void 0,xstyle:j.contactsList,children:[i.jsx(c("MWCMLightSpeedChatTabActionViewItems.react"),{}),i.jsx("ul",{children:a.map(function(a){return i.jsx(c("MWLightSpeedChatTabSuggestedContactItem.react"),{setTokens:b,token:a},a.key)})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWLightSpeedChatTabContactsContainer.react",["CometTransientDialogProvider.react","LSIntEnum","MNetRankType","MWChatSearchFetchContactRecommendations","MWLightSpeedChatTabSuggestedContacts.react","createMWChatSearchTypeaheadDataEntry","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h.useMemo;function a(a){var b=a.isSearchView;a=a.setTokens;var e=d("MWChatSearchFetchContactRecommendations").useChatSearchContactRecommendations((i||(i=d("LSIntEnum"))).ofNumber(c("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE)),f=k(function(){return e.map(function(a){a=a[0];return c("createMWChatSearchTypeaheadDataEntry")(a)})},[e]);return b?null:j.jsx(c("CometTransientDialogProvider.react"),{children:j.jsx(c("MWLightSpeedChatTabSuggestedContacts.react"),{setTokens:a,tokens:f})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatTabTokenizerInternalLayoutInlineStrategy.react",["CometScrollableArea.react","CometTokenizerInputStrategyEventListener.react","CometTypeaheadViewStrategyEventListener.react","cometHandleHighlightDropOnMouseLeave","emptyFunction","react","stylex","useCometInternalTypeaheadState","useCometTypeaheadKeyboardForScrollableArea","useCometTypeaheadLayoutStrategyStyles","xplatToDOMRef"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={view:{backgroundColor:"x1jx94hy",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",$$css:!0},viewHidden:{pointerEvents:"x47corl",visibility:"xlshs6z",$$css:!0}};function a(a){var b=a.commandConfigs,e=a.extraLayoutProps,f=e.afterViewContent,g=e.ariaProps,i=g.ariaDescribedByProps,l=g.ariaInputProps,m=g.ariaViewProps;g=e.beforeViewContent;var n=e.helperTextComponent,o=e.isLoading;e=e.isOpened;var p=a.description,q=a.errorMessage,r=a.inputStrategyRenderer,s=a.inputRef,t=a.isDisabled,u=a.label,v=a.onBackspace,w=a.onBlur,x=a.onChange,y=a.onDownArrow,z=a.onEnter,A=a.onEscape,B=a.onFocus,C=a.onShiftTab,D=a.onTab,E=a.onUpArrow,F=a.queryString,G=a.selectedEntries,H=a.tokensStrategyRenderer,I=a.viewStrategyRenderer,J=a.xstyles;J=J===void 0?{}:J;var K=a.extraViewProps,L=babelHelpers.objectWithoutPropertiesLoose(a,["commandConfigs","extraLayoutProps","description","errorMessage","inputStrategyRenderer","inputRef","isDisabled","label","onBackspace","onBlur","onChange","onDownArrow","onEnter","onEscape","onFocus","onShiftTab","onTab","onUpArrow","queryString","selectedEntries","tokensStrategyRenderer","viewStrategyRenderer","xstyles","extraViewProps"]);a=c("useCometInternalTypeaheadState")();var M=a.activeEntries,N=a.highlightedEntry;a=c("useCometTypeaheadLayoutStrategyStyles")({isOpened:e,xstyles:J});J=a.inputXStyle;var O=a.layoutXStyle,P=a.viewXStyle_DO_NOT_USE,Q=c("useCometTypeaheadKeyboardForScrollableArea")(N),R=c("cometHandleHighlightDropOnMouseLeave")(L.onHighlightEntry);return j.jsxs("div",{className:(h||(h=c("stylex")))(O),children:[j.jsx("div",{className:h(J),onClick:L.onClick,role:"presentation",children:j.jsx(c("CometTokenizerInputStrategyEventListener.react"),{commandConfigs:b,onBackspace:v,onBlur:w,onChange:x,onClick:c("emptyFunction"),onDownArrow:y,onEnter:z,onEscape:A,onFocus:B,onShiftTab:C,onTab:D,onUpArrow:E,ref:s,children:function(a,b){return j.jsx(r,babelHelpers["extends"]({description:p},b,{ariaProps:l,autoFocus:L.autoFocus,errorMessage:q,id:L.id,inputEndContent:L.inputEndContent,inputExtraProps:L.inputExtraProps,inputStartContent:j.jsx(H,{isDisabled:t,onPress:L.onRemoveEntry,tokens:G}),isDisabled:t,label:u,placeholder:G.length>0?null:L.placeholder,queryString:F,ref:d("xplatToDOMRef").xplatToInputRef(a),testid:void 0}))}})}),n!=null&&j.jsx("div",babelHelpers["extends"]({},i,{children:n})),g,e&&j.jsx(c("CometTypeaheadViewStrategyEventListener.react"),{onOutsideClick:L.onOutsideClick,children:function(a){return j.jsx("div",{className:(h||(h=c("stylex")))([k.view,P,M.length===0&&!o&&k.viewHidden]),onMouseLeave:R,ref:a,children:j.jsx(c("CometScrollableArea.react"),{horizontal:!1,ref:Q,children:j.jsx(I,{ariaProps:m,entries:M,extraViewProps:K,highlightedEntry:N,isLoading:o,onHighlightEntry:L.onHighlightEntry,onPressEntry:L.onPressEntry,queryString:F})})})}}),f]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatTabTokenizerBaseLayoutInlineStrategy.react",["CometTypeaheadHelperText.react","MWChatTabTokenizerInternalLayoutInlineStrategy.react","react","useBaseTypeaheadLayoutContextualStrategyStateContext","useCometInternalTokenizerFetch","useCometInternalTypeaheadState","useCometTokenizerInternalLayoutInlineStrategyHandlers","useCometTypeaheadInputRefs","useCometTypeaheadLayoutContextualStrategyARIAProps"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useEffect;function a(a){var b=a.extraLayoutProps;b=b===void 0?{}:b;var d=b.afterViewContent;b=b.beforeViewContent;var e=a.helperText,f=a.inputRef,g=a.label,h=a.onBackspace,k=a.onBlur,l=a.onChange,m=a.onDownArrow,n=a.onEnter,o=a.onEscape,p=a.onHighlightEntry,q=a.onOutsideClick,r=a.onPressEntry,s=a.onRemoveEntry,t=a.onUpArrow,u=a.viewRole,v=a.selectedEntries;a=babelHelpers.objectWithoutPropertiesLoose(a,["extraLayoutProps","helperText","inputRef","label","onBackspace","onBlur","onChange","onDownArrow","onEnter","onEscape","onHighlightEntry","onOutsideClick","onPressEntry","onRemoveEntry","onUpArrow","viewRole","selectedEntries"]);var w=c("useCometInternalTokenizerFetch")();w=w.isLoading;var x=c("useCometInternalTypeaheadState")(),y=x.activeEntries;x=x.highlightedEntry;var z=c("useBaseTypeaheadLayoutContextualStrategyStateContext")(),A=z.dispatchIsOpened;j(function(){A(!0)},[A]);z=c("useCometTypeaheadInputRefs")(f);f=z.composedRef;z=z.inputRef;h=c("useCometTokenizerInternalLayoutInlineStrategyHandlers")({handlers:{onBackspace:h,onBlur:k,onChange:l,onDownArrow:m,onEnter:n,onEscape:o,onHighlightEntry:p,onOutsideClick:q,onPressEntry:r,onRemoveEntry:s,onUpArrow:t},inputRef:z,selectedEntries:v});k=c("useCometTypeaheadLayoutContextualStrategyARIAProps")({activeEntries:y,helperText:e,highlightedEntry:x,inputLabel:g,isOpened:!0,viewRole:u});return i.jsx(c("MWChatTabTokenizerInternalLayoutInlineStrategy.react"),babelHelpers["extends"]({},a,h,{extraLayoutProps:{afterViewContent:d,ariaProps:k,beforeViewContent:b,helperTextComponent:e!=null?i.jsx(c("CometTypeaheadHelperText.react"),{text:e}):null,isLoading:w,isOpened:!0},inputRef:f,label:g,selectedEntries:v,viewRole:u}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatTabsTokenizerLayoutInlineStrategy.react",["fbt","MWChatTabTokenizerBaseLayoutInlineStrategy.react","QPLUserFlow","qpl","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useMemo,l={layout:{marginEnd:"xktsk01",marginLeft:null,marginRight:null,overflowX:"x6ikm8r",overflowY:"x10wlt62",width:"xi55695",$$css:!0},layoutContainer:{borderBottomColor:"x80vd3b",borderBottomStyle:"x1q0q8m5",borderBottomWidth:"xso031l",display:"x78zum5",$$css:!0},root:{position:"x1n2onr6",$$css:!0},to:{color:"xzsf02u",fontSize:"x6prxxf",fontWeight:"x1fcty0u",lineHeight:"xvq8zen",marginStart:"x1d52u69",marginLeft:null,marginRight:null,marginTop:"x1xmf6yo",zIndex:"x1n327nk",$$css:!0},typeaheadInput:{backgroundColor:"xcrg951",boxSizing:"x9f619",display:"x1lliihq",paddingEnd:"x1sxyh0",paddingLeft:null,paddingRight:null,paddingStart:"xurb0ha",$$css:!0},view:{backgroundColor:"xcrg951",height:"xl6hnh8",maxHeight:"xj8ehma",position:"x10l6tqk",start:"xmh0m78",left:null,right:null,top:"xdsb8wn",width:"xi55695",zIndex:"xhtitgo","@media (min-height: 1280px)_height":"x460g69",$$css:!0}};function a(){return function(a){var b=a.xstyles;b=b===void 0?{}:b;var d=b.viewXStyle_DO_NOT_USE,e=babelHelpers.objectWithoutPropertiesLoose(a,["xstyles"]);b=k(function(){return{inputXStyle:[l.typeaheadInput],layoutXStyle:[l.layout],viewXStyle_DO_NOT_USE:[l.view,d]}},[d]);return j.jsxs("div",{className:"x1n2onr6",children:[j.jsxs("div",{className:"x80vd3b x1q0q8m5 xso031l x78zum5",children:[j.jsx("div",{"aria-hidden":"true",className:"xzsf02u x6prxxf x1fcty0u xvq8zen x1d52u69 x1xmf6yo x1n327nk",children:h._("__JHASH__6UNdxXc7Mre__JHASH__")}),j.jsx(c("MWChatTabTokenizerBaseLayoutInlineStrategy.react"),babelHelpers["extends"]({},e,{contextualProps:{align:"start",disableAutoFlip:!0},label:h._("__JHASH__dp6PXfW93vj__JHASH__"),layerContext:"root",onFocus:function(){e.onFocus(),c("QPLUserFlow").start(c("qpl")._(25312244,"1683"))},onOutsideClick:function(){e.onOutsideClick(),c("QPLUserFlow").endCancel(c("qpl")._(25312244,"1683"))},xstyles:b}))]}),(a=e.extraLayoutProps)==null?void 0:a.footer]})}}g.createMWChatTabsTokenizerLayoutInlineStrategy=a}),98);
__d("MWV2ComposeTabHeader.react",["fbt","MWPThreadThemeGradientUtils","MWV2HeaderCloseButton.react","MWV2HeaderContainer.react","MWV2IsTabFocusedContext.react","MWXText.react","QPLUserFlow","qpl","react","useMWPThreadTheme","useMWV2CloseTab"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function k(){return j.jsx("div",{className:"x1sln4lm",children:j.jsx(c("MWXText.react"),{type:"headline4",children:h._("__JHASH__uhF6__U4Uqu__JHASH__")})})}k.displayName=k.name+" [from "+f.id+"]";function a(a){var b=a.tab;a=a.thread;var e=c("useMWV2CloseTab")(a==null?void 0:a.threadKey,b);a=d("MWV2IsTabFocusedContext.react").useIsTabFocused();b=c("useMWPThreadTheme")();b=d("MWPThreadThemeGradientUtils").getTopGradientColor(b);a=a?b:"#BEC2C9";return j.jsx(c("MWV2HeaderContainer.react"),{divider:!1,endContent:j.jsx(c("MWV2HeaderCloseButton.react"),{color:a,label:h._("__JHASH__1QV0CKBqQm1__JHASH__"),onPress:function(){e(),c("QPLUserFlow").endCancel(c("qpl")._(25312244,"1683"))}}),startContent:j.jsx(k,{})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useLinkNewThreadToInteractionUUID",["I64","Int64Hooks","MWChatInteraction"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){d("Int64Hooks").useEffectInt64(function(){(a==null?void 0:a.threadKey)!=null&&b!=null&&d("MWChatInteraction").set((h||(h=d("I64"))).to_string(a.threadKey),b)},[a==null?void 0:a.threadKey,b])}g["default"]=a}),98);
__d("MWV2ComposeTab.react",["CometHeroInteractionWithDiv.react","CometPlaceholder.react","CometProgressRingIndeterminate.react","I64","JSResourceForInteraction","LSThreadAttributionStore","MWChatInteraction","MWChatLightSpeedSearchTypeahead.react","MWChatStateActions","MWChatStateV2.react","MWChatStateV2Types","MWChatTabsTokenizerLayoutInlineStrategy.react","MWChatTemporarySearchResult","MWChatTokenizerTokenStrategy.react","MWInteropTokenUtils","MWLightSpeedChatTabContactsContainer.react","MWOpenAndSecureThreadView.react","MWPNewMessageDraftContext.react","MWPReplyContext.react","MWPThreadThemeProvider.react","MWV2ChatTabComposer.react","MWV2ComposeTabHeader.react","MWV2ComposerHasContentContext.react","MWV2FileDropzone.react","MWV2NewThreadUtils","MWV2TabContainer","cr:4185","createMWChatSearchTypeaheadDataEntry","gkx","isArmadillo","isTlcSearchEnabled","lazyLoadComponent","react","useLinkNewThreadToInteractionUUID","useMAWMaybeRedirectComposeViewToSecureOneToOneThread","useMWSearchTypeaheadViewItemIsDisabled","useMWThreadListNewMessage","usePrevious","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react"));e=i;var l=e.memo,m=e.useCallback,n=e.useContext,o=e.useEffect,p=e.useMemo,q=e.useState,r=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWPThreadPreview.react").__setRef("MWV2ComposeTab.react"));function s(a){var b=a.length,e=c("usePrevious")(b);a=n(d("MWPReplyContext.react").MWPReplyContext);var f=a.clearReply;o(function(){e!=null&&b!==e&&f((j||(j=d("I64"))).zero,!0)},[b,e,f])}var t=c("isTlcSearchEnabled")();function a(a){var e=a.initialTokens,f=a.tab;a=(h||(h=c("useReStore")))();d("MWV2NewThreadUtils").useSyncRanking();var g=q(),i=g[0];g=g[1];var l=f.tabType,n=l.type===d("MWChatStateV2Types").MWChatStateTabType.ComposeTab?l.secureThreadToggleEnabled:!1,u=c("gkx")("2761")&&c("isArmadillo")();l=q(function(){if(u)return!0;else return n});var v=l[0],w=l[1];l=d("MWChatInteraction").get("open_new");c("useLinkNewThreadToInteractionUUID")(i,l);e=e.map(function(a){return c("createMWChatSearchTypeaheadDataEntry")(d("MWChatTemporarySearchResult").fromContact(void 0,v,a))});e=d("MWV2NewThreadUtils").useTokens(e,v);var x=e[0],y=e[1];e=e[2];var z=d("MWV2NewThreadUtils").useTokensShimmed(x,v);c("useMWThreadListNewMessage")(x);s(x);var A=q(!1),B=A[0],C=A[1],D=d("MWChatStateV2.react").useDispatch();A=function(a){return D(d("MWChatStateActions").lockInTab(f.tabId,a))};A=d("MWV2NewThreadUtils").useOnAddToken(v,C,A,w);var E=m(function(){return C(!0)},[C]),F=p(function(){return d("MWChatTabsTokenizerLayoutInlineStrategy.react").createMWChatTabsTokenizerLayoutInlineStrategy()},[]),G=c("useMWSearchTypeaheadViewItemIsDisabled")(x,v),H=p(function(){return x.some(d("MWInteropTokenUtils").isInterop)},[x]),I=JSON.stringify(i==null?void 0:i.threadKey);a=c("useMAWMaybeRedirectComposeViewToSecureOneToOneThread")(a,t,x,w);a=a.isCutoverInProgress;var J=k.jsx(c("CometPlaceholder.react"),{fallback:k.jsx("div",{className:"x6s0dn4 x78zum5 x1iyjqo2 xl56j7k",children:k.jsx(c("CometProgressRingIndeterminate.react"),{color:"disabled",size:24})}),children:k.jsx(c("MWLightSpeedChatTabContactsContainer.react"),{isSearchView:!1,setTokens:y})}),K=p(function(){return{footer:b("cr:4185")==null?null:k.jsx("div",{className:"x7m3og9 x1pi30zi x1swvt13 xyinxu5 x1g2khh7 xjl7jj",children:k.jsx(b("cr:4185"),{areWeCreatingASecureThread:v,disabled:H,setAreWeCreatingASecureThread:w,stretch:!0})})}},[v,w,H]);if(i!=null){E=k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx(c("MWPThreadThemeProvider.react"),{themeFbid:i.themeFbid,children:k.jsx(c("MWV2ChatTabComposer.react"),{afterSendMessage:E,isPreviewThread:!0,tab:f,thread:i},(j||(j=d("I64"))).to_string((E=i.clientThreadKey)!=null?E:i.threadKey))})})}else E=null;o(function(){if(i!=null){var a=d("LSThreadAttributionStore").getSourceForNewThread();a!=null&&d("LSThreadAttributionStore").setSource((j||(j=d("I64"))).to_string(i.threadKey),a)}},[I]);return k.jsx(c("CometHeroInteractionWithDiv.react"),{interactionDesc:"MWV2_CHAT_TAB",interactionUUID:l,pageletName:"ChatTab",children:k.jsx(d("MWPNewMessageDraftContext.react").MWPNewMessageDraftContextProvider,{children:k.jsx(d("MWV2ComposerHasContentContext.react").MWV2ComposerHasContentContextProvider,{children:k.jsx(c("MWV2TabContainer"),{tab:f,threadKey:(I=i==null?void 0:i.threadKey)!=null?I:void 0,children:k.jsxs("div",{className:"x78zum5 xdt5ytf x5yr21d x1ja2u2z",children:[k.jsx(c("MWV2ComposeTabHeader.react"),{tab:f,thread:(l=i)!=null?l:void 0}),k.jsx(d("MWV2FileDropzone.react").MWV2FileDropzone,{isMediaOnly:H,thread:(I=i)!=null?I:void 0,children:k.jsxs("div",{className:"x78zum5 xdt5ytf x1iyjqo2 x2lwn1j x1n2onr6 x1vjfegm",children:[k.jsx(c("MWChatLightSpeedSearchTypeahead.react"),{excludedIDs:e,extraLayoutProps:K,getIsViewItemDisabled:G,includeRecommendations:!1,isDisabled:B,isSecure:v,layoutStategyRenderer:F,onAddToken:A,onChangeTokens:y,tokenItemRenderer:c("MWChatTokenizerTokenStrategy.react"),tokens:x}),k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx(r,{areWeCreatingASecureThread:v,isCutoverInProgress:a,nullstate:J,renderThreadView:function(a){return k.jsx(c("MWOpenAndSecureThreadView.react"),{thread:a})},setPreviewThread:g,tokens:z,children:E})})]})})]})})})})})}a.displayName=a.name+" [from "+f.id+"]";e=l(a);g["default"]=e}),98);
__d("PaymentsCometTransactionHubSettingsRootQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6430781233642860"}),null);/*FB_PKG_DELIM*/
__d("MWChatSearchThreadCutover",["FBLogger","I64","ReQL","ReQLSuspense","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a,b){b=(h||(h=d("I64"))).of_string_opt(b);if(b==null)return!1;a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(a.table("cutover_threads")).getKeyRange(b),f.id+":24");return Boolean(a)};a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(h||(h=d("I64"))).of_string_opt(b);if(b==null)return;var e=Boolean(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("cutover_threads")).getKeyRange(b)));if(e){e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("mi_act_mapping_table").index("jid")).getKeyRange(b)));if(e!=null)return(h||(h=d("I64"))).to_string(e==null?void 0:e.serverThreadKey);else{c("FBLogger")("Messenger Search").mustfix("Mapping of open thread not found in mi_act_mapping_table but found in cutover_threads table.");return}}return});return function(b,c){return a.apply(this,arguments)}}();e=function(a,b,c){var d=[],e=new Set();for(b of b)e.has(b.id)||(!c.has(b.resultType)||!i(a,b.id))&&(d.push(b),e.add(b.id));return d};g.getCutoverThreadKey=a;g.filterOutCutoverOpenThreadBasedOnSearchResultTypes=e}),98);
__d("MWChatSearchFilteringUtils",["I64","LSMessagingThreadTypeUtil","MWChatSearchResultType","MWChatSearchThreadCutover","MessengerMSplitFlag","Promise","asyncToGeneratorRuntime","gkx","hasDefaultThreadOneToOneCapability"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,c,d){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,d,e){d===void 0&&(d=!1);e===void 0&&(e=!0);var f=a;d&&(f=a.filter(function(a){a.key;a=a.rawData;return a.isE2EE}));if(c==null)return f;var g=(yield (i||(i=b("Promise"))).all(f.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(yield l(a,c))return!1;if(!d&&e&&(yield m(a,c)))return!1;return k(a)?!1:!0});return function(b){return a.apply(this,arguments)}}())));f=a.filter(function(a,b){return g[b]});return f});return j.apply(this,arguments)}function k(a){a=a.rawData;var b=a.isAiBot;a=a.isViewerUnconnected;return b===!0&&(c("MessengerMSplitFlag").is_msplit_account||!c("gkx")("10640")||a!==!1)}function e(a){var b=[],c=new Set();a.forEach(function(a){c.has(a.key)||(b.push(a),c.add(a.key))});return b}function f(a,b){if(b!=null)return d("LSMessagingThreadTypeUtil").isSecure(b.threadType);return a!=null?a.isE2EE===!0:!1}function l(a,e){a=a.rawData;if(a.resultType!==c("MWChatSearchResultType").USER)return(i||(i=b("Promise"))).resolve(!1);var f=a.defaultE2eeThreadOneToOne,g=a.id,j=a.isE2EE;a=a.otherUserId;if(!j)return(i||(i=b("Promise"))).resolve(!1);return f===!0?(i||(i=b("Promise"))).resolve(!1):c("hasDefaultThreadOneToOneCapability")((h||(h=d("I64"))).of_string_opt((j=a)!=null?j:g),e)}function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e;a=a.rawData;if(a.resultType!==c("MWChatSearchResultType").USER&&a.resultType!==c("MWChatSearchResultType").GROUP)return!1;var f=a.otherUserId!=null;e=(e=a.otherUserId)!=null?e:a.id.toString();if(b==null)return!1;else b=(yield d("MWChatSearchThreadCutover").getCutoverThreadKey(b,e));e=b!=null;if(f){if(!e)return!1;return e&&a.id.toString()===b?!1:!0}else return e});return n.apply(this,arguments)}g.filterSearchResults=a;g.dedupeByThreadKey=e;g.getIsE2ee=f}),98);
__d("isTlcSearchEnabled",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("607")===!0}g["default"]=a}),98);
__d("MWThreadCreationUtil",["FBLogger","I64","LSContactBitOffset","LSIntEnum","LSMessagingThreadTypeUtil","MAWVerifyThreadCutover","MWChatSearchFilteringUtils","MWChatSearchResultType","Promise","ReQL","ReQLSuspense","asyncToGeneratorRuntime","gkx","isTlcSearchEnabled","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,b){var c=n(a);b=d("ReQLSuspense").toArray(d("ReQL").fromTableAscending(b.table("participants"),["contactId","threadKey"]).filter(function(a){return c.has((j||(j=d("I64"))).to_string(a.contactId))}).map(function(a){return[(j||(j=d("I64"))).to_string(a.threadKey),j.to_string(a.contactId)]}),f.id+":45");var e=[],g=new Map();b!=null&&b.forEach(function(b){var c=g.get(b[0]);c=c!=null?c+1:1;g.set(b[0],c);c===a.length&&e.push(b[0])});return e}function e(a,b,e){var f=!1;c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableDescending(b.table("threads").index("lastActivityTimestampMs")).filter(function(b){return a.includes((j||(j=d("I64"))).to_string(b.threadKey))&&b.threadName==null})).then(function(a){a!=null&&(f=!0,e(d("LSMessagingThreadTypeUtil").isSecure(a.threadType)))})["catch"](function(a){c("FBLogger")("Armadillo Group TLC").mustfix("Issue getting and navigating to the most recent thread",a)}));return f}function k(a,b){var c=!0;b=d("ReQLSuspense").toArray(d("ReQL").fromTableAscending(b.table("contacts")).filter(function(b){var c=a.has((j||(j=d("I64"))).to_string(b.id));c&&a["delete"]((j||(j=d("I64"))).to_string(b.id));return c}),f.id+":113");for(var e=0;e<b.length;e++)if(b[e]!=null){var g=d("LSContactBitOffset").has(80,b[e]);if(!g){c=!1;break}}return c}function l(a,b){var c=!0;b=d("ReQLSuspense").toArray(d("ReQL").fromTableAscending(b.table("server_search_results")).filter(function(b){var c=a.has(b.resultId.toString());c&&a["delete"](b.resultId.toString());return c}),f.id+":148");for(var e=0;e<b.length;e++)if(b[e]!=null&&(b[e].defaultE2eeThreads===null||b[e].defaultE2eeThreads===!1)){c=!1;break}return c}function m(a,b,d){if(!d)return!1;d=n(a);a=k(d,b);if(d.size===0||!a)return a;a=l(d,b);if(d.size===0)return a;c("FBLogger")("Armadillo Group TLC").warn("Tokens not in the Contacts table or Server Search Results table");return!1}function n(a){var b=new Set();a.forEach(function(a){a=a.rawData.otherUserId!=null?a.rawData.otherUserId:a.key;b.add(a)});return b}function o(a){return a.rawData.hasCutoverThread===!0||p()&&a.rawData.defaultE2eeThreadOneToOne===!0}function p(){var a=c("isTlcSearchEnabled")(),b=c("gkx")("3536");return a&&b}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=d("MWChatSearchFilteringUtils").getIsE2ee(a.rawData);if(e)return{isSecureThread:!0,reason:"e2ee"};e=a.rawData.id;c=(yield d("MAWVerifyThreadCutover").verifyThreadCutover((h||(h=b("Promise"))).resolve(c),(j||(j=d("I64"))).of_string(e)));if(c)return{isSecureThread:!0,reason:"cutover"};return o(a)?{isSecureThread:!0,reason:"default_e2ee"}:{isSecureThread:!1}});return r.apply(this,arguments)}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.table("threads")).getKeyRange((j||(j=d("I64"))).of_string(a.key))));return b});return t.apply(this,arguments)}function u(a,b){if(a!==c("MWChatSearchResultType").GROUP)return b?(i||(i=d("LSIntEnum"))).ofNumber(15):(i||(i=d("LSIntEnum"))).ofNumber(1);else return b?(i||(i=d("LSIntEnum"))).ofNumber(16):(i||(i=d("LSIntEnum"))).ofNumber(2)}function v(a,b,c,d,e){a.openTabOrInbox({clientThreadKey:b,threadKey:c,threadType:u(d,e)},"search")}g.getExistingThreadsWithTheTokens=a;g.maybeUpdateIsSecureBasedOnUnnamedRecentThread=e;g.checkE2EEligibilityForEachContact=m;g.passesWebSearchDefaultE2eeThreadCreationGating=p;g.getIsSecureBasedOnContactCapabilitiesForOneToOneThreadV2=q;g.checkIfThreadExistsInThreadTable=s;g.navigateToThread=v}),98);